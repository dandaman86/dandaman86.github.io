<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

<style type="text/css">

html{
	position: relative;
	height: 100%;
}
body{
	height:100%;
}

.window{
	/*background: url(img/zoo.jpg) 100% no-repeat;
    background-size: cover;*/
	height:380px;
	width:100%;
	border: solid 1px;
	overflow: hidden;
	position: relative;
	/*z-index: -5;*/
}
.face {
    /*background: url(img/face.png)no-repeat;*/
    background-size: 100%;
    background-position: center;
    width: 200px;
    height: 280px;
    position: absolute;
    bottom:55px;
    left: 0;
	right: 0;
	margin-left: auto;
	margin-right: auto;
    z-index: -2;
}

.face img.cuz{
    width: 200px;
    height: 280px;
}

.rex{
    position: relative;
    top: -98px;
    left: 76px;
    transform: scale(0.3);
    z-index: -1;
}

.dino-part {
	position: absolute;
}

.frontleg{
	 transform: translate(283px, 125px);
	 animation: legMoveTwo 1.5s ease-in infinite;
}

.backleg{
	transform: translate(150px, 260px);
	animation: legMoveOne 1.5s 0.6s ease-in infinite;
}
.mouth{
    position: absolute;
    left: 50%;
    top: 190px;
    transform: translate(-40%);
}

.mouth img{
	width: 95px;
    margin: 0 auto;
    display: block;
    transform: translate(0);
    animation: mouthMove 0.19s infinite;
}

.target{
	opacity: 0.4;
	transition: all 0.2s ease-in;
	width:100%;
}

.inmotion .target {
	opacity: 1;
	transform: scale(2);
}

.bullet{
    background-color: #000;
    width: 15px;
    height: 35px;
    border-radius: 50px;
    position: absolute;
    opacity: 1;
    bottom: 0;
    z-index: -1;
}

.gun{
	position: absolute;
	bottom:0;
}

.gun img{
	transform: translate(-50%);
}
#draggable { width: 80px; height: 80px; padding: 0.5em; z-index: 5; position: absolute; }


.vanishOut {
    animation: vanishOut 0.6s ease-in;
    background: linear-gradient(red, yellow);
}

.trigger{
	position: absolute;
	bottom: 10px;
	right:10px;
	border:red solid 2px;
	border-radius: 300px;
	width:80px;
	height:80px;
}

.fap{
	width: 450px;
    margin: 0 auto;
    position: relative;
    bottom:-650px;
    transform:scale(0.7);
    left: -20px;
}

.fap.in{
	animation: fap-in  2.5s ease-in forwards;

}


.fap-part{
	position: absolute;
}
.dick{
	left: 221px;
	bottom: 0;
}
.hand{
	left:0;
	bottom: -30px;
	transform: translateY(65px);
}

.fap.in .hand{
	animation: fap 2s 3s ease-in;
}


.fireworks {
	width: 5px;
    margin: 0 auto;
}

span.particle{
    position: absolute;
    width: 5px;
    height: 7px;
    background: pink;
    border-radius: 200px;
    border: solid 1px purple;
    filter: blur(1px);
}

@keyframes vanishOut {
    0% {
        opacity: 1;
        transform-origin: 50% 50%;
        transform: scale(1,1);
        filter: blur(0)
    }

    50% {
    	background: linear-gradient(red, red);
    }

    100% {
        opacity: 0;
        transform-origin: 50% 50%;
        transform: scale(2,2);
        filter: blur(200px);
        
    }
}

@keyframes mouthMove {
    0% {transform: translate(0, 0);}
    50% {transform: translate(-5px, -15px);}
    100% {transform: translate(0, 0);}
}

@keyframes legMoveOne {
    0% {transform: translate(150px, 260px) rotate(0deg);}
    40% {transform: translate(150px, 260px) rotate(3deg);}
    65% {transform: translate(150px, 260px) rotate(-10deg);}
    100% {transform: translate(150px, 260px) rotate(0deg);}
}

@keyframes legMoveTwo {
    0% {transform: translate(283px, 125px) rotate(0deg);}
    40% {transform: translate(283px, 125px) rotate(3deg);}
    65% {transform: translate(283px, 125px) rotate(-10deg);}
    100% {transform: translate(283px, 125px) rotate(0deg);}
}

@keyframes fap-in {
     0% {transform: translateY(0) scale(0.7);}
    100% {transform: translateY(-400px) scale(0.7);}

}

@keyframes fap {
    0% {transform: translateY(0);}
    10% {transform: translateY(65px);}
    30% {transform: translateY(0);}
    40% {transform: translateY(65px);}
    50% {transform: translateY(0);}
    60% {transform: translateY(65px);}
    70% {transform: translateY(0);}
    80% {transform: translateY(65px);}
    90% {transform: translateY(0);}
    100% {transform: translateY(65px);}

}

</style>
</head>

<body>

<div class="window">
<div class="bullets-left"><span class="number">10</span></div>
	<div class="face">
		<img class="cuz" src="img/face.png" />
		<div class="mouth">
			<img src="img/mouth.png">
		</div>
		<div class="rex">
			<img class="backleg dino-part" src="img/rex-behind-leg.png" />
			<img class="body dino-part" src="img/rex-body.png" />
			<img class="frontleg dino-part" src="img/rex-front-leg.png" />
		</div>
		
	</div>



<div id="draggable" class="ui-widget-content">
  <img class="target" src="img/target.png" width="100%"/>
</div>
</div>

<div class="gun">
	<img src="img/gun.png" />
</div>
<div class="bullet"></div>

<div class="fireworks">
	<span class="particle"></span>
</div>
<div class="fap">
	<img class="dick fap-part" src="img/dick.png" />
	<img class="hand fap-part" src="img/hand.png" />
</div>

<div class="trigger"><span>TRIGGER</span></div>
<!--<embed src="audio/blah.flac" loop="true" autostart="true" style="visibility:hidden;"/>-->
<!--<embed src="audio/shot.wav" loop="true" autostart="true" style="visibility:hidden;"/>-->
<!--<embed src="audio/groan.wav" loop="true" autostart="true" style="visibility:hidden;"/>-->

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="js/jquery.ui.touch-punch.min.js"></script>
<script type="text/javascript">
  $( function() {
  	var bullseye = false;
	var life = [];
    var faceShot = $(".face");
    var bulletsLeft = 10;

        $("#draggable").draggable({
        containment: "parent",
        revert: function(is_valid_drop){

            if(!is_valid_drop){

                $(this).removeClass("remove inmotion");
               return false;
            } else {
				
                $(this).removeClass("remove inmotion");
                return true;
            }
        },
        drag: function(){
        	    var $this = $(this);
				var offset = $this.offset();
				var width = $this.width();
				var height = $this.height();
				var centerX = offset.left + width / 2;
				var centerY = offset.top + height / 2;
            // as you drag, add your "dragging" class, like so:
            $(this).addClass("inmotion");
            $('div.gun, div.bullet').animate({
            	left:centerX
            },0);
        }
    });

var finishHim = function(){
var span = '';
$('.gun, .bul').fadeOut();
$(".fap").addClass("in");

for (var i = 0; i < 800; i++){
	setTimeout(function() { 


	span += '<span class="particle"></span>';
	$('.fireworks').html(span);
}, 1000);
		
}

setTimeout(function() { 
	var audio = new Audio('audio/groan.wav');
			audio.play();
	var arr = $('.particle');
	var d = $.Deferred().resolve();
		$(arr).get().forEach(function(el){
   		 d = d.then(function(){ return $(el).animate({
   		 		top: Math.random() * 200,
        		left: Math.random() * 900,
   		 }, 130); });
		});
}, 5500);


};



$(".trigger").on('click touch', function () {

	var audio = new Audio('audio/shot.wav');
	audio.play();
	
    var $this = $('#draggable');
	var offset = $this.offset();
	var width = $this.width();
	var height = $this.height();
	var centerX = offset.left + width / 2;
	var centerY = offset.top + height / 2;
	bulletsLeft--;

	$('.bullets-left').html(bulletsLeft);

	if(bulletsLeft == 0){
		alert("GAME OVER");
	}
	var shot = function (){
		var face = $('.face');
		var faceOffset = face.offset();
		var faceWidth = face.width();
		var faceHeight = face.height();
		var centerLeft = faceOffset.left + faceWidth / 2;
		var centerTop = faceOffset.top + faceHeight / 2;

	if( (centerX > faceOffset.left)  && (centerX < faceOffset.left + faceWidth - 15) && (centerY > faceOffset.top) && (centerY < faceOffset.top + faceHeight) ){
		bullseye = true;
		life.push(bullseye);
		life.length > 4 ?  finishHim() : '';
			var audio = new Audio('audio/groan.wav');
			audio.play();

		} else {
			centerY = $('html').offset().top;
		}

	$('div.bullet').stop(true,false).animate({
		top: centerY,
        left: centerX,
        opacity: 1
    }, function(){
        	$(this).addClass("vanishOut");
        	setTimeout( function(){
				$('div.bullet').css("top", "").removeClass("vanishOut");
        	},200);
        	
        });
	}();


});




function makeNewPosition(){
    
    // Get viewport dimensions (remove the dimension of the div)
    var h = $('.window').height();
    var w = $('.window').width();
    
    var nh = Math.floor(Math.random() * h);
    var nw = Math.floor(Math.random() * w);
    
    return [nh,nw];    
    
}

function animateDiv(){
    var newq = makeNewPosition();
    var oldq = $('.face').offset();
    var speed = calcSpeed([oldq.top, oldq.left], newq);
    
    $('.face').animate({ top: newq[0], left: newq[1] }, speed, function(){
      animateDiv();        
    });
    
};

function calcSpeed(prev, next) {
    
    var x = Math.abs(prev[1] - next[1]);
    var y = Math.abs(prev[0] - next[0]);
    
    var greatest = x > y ? x : y;
    
    var speedModifier = 0.09;

    var speed = Math.ceil(greatest/speedModifier);

    return speed;

}

    animateDiv();

  });
</script>	

</body>
</html>
